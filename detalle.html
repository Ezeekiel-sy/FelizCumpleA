<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta</title>
    <script src="Ocultarcart.js"></script>
    <style>
        
      

        /* Estilos generales para la página */
        body {
            font-family: 'Georgia', serif;  /* Fuente vintage, estilo Lana del Rey */
            margin: 0;
            padding: 0;
            background-color: #f1e6f0;  /* Color de fondo suave */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden; /* Evitar desplazamiento innecesario */
        }

        /* Estilo para la imagen */
        img {
            width: 60%;  /* Reducir el tamaño de la imagen */
            max-width: 400px;  /* Tamaño máximo */
            height: auto;
            border-radius: 15px;  /* Bordes redondeados */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);  /* Sombra suave */
            display: block;
            margin-bottom: 20px;
            transition: transform 0.3s ease-in-out;
        }

        /* Efecto de hover en la imagen */
        img:hover {
            transform: scale(1.05);  /* Hacer que la imagen se agrande un poco al pasar el mouse */
        }

        /* Estilo para los mensajes debajo de la imagen */
        .message {
            background-color: #fce4d6;  /* Fondo suave para el mensaje */
            padding: 15px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            font-size: 1.2em;
            color: #3b3b3b;
            font-style: italic;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        /* Estilo para el contenedor de la página */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

    </style>
</head>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-analytics.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAAyb70maz_p0io4ReeRrP-PGIm42YMHhk",
        authDomain: "feliz-cumple-amor-e05e2.firebaseapp.com",
        projectId: "feliz-cumple-amor-e05e2",
        storageBucket: "feliz-cumple-amor-e05e2.firebasestorage.app",
        messagingSenderId: "533401638338",
        appId: "1:533401638338:web:547e3446d18963ac5c325b",
        measurementId: "G-YGMWW589WC"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
</script>
<script type="module">
    import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-messaging.js";

    const messaging = getMessaging();

    Notification.requestPermission()
        .then(permission => {
            if (permission === 'granted') {
                console.log('Permiso para notificaciones concedido.');
                return getToken(messaging, { vapidKey: "251P8qWdnEaw7OL07Jh4s8oO9Ljdf3EulGqHlc0rTlg" }); 
            } else {
                console.log('Permiso para notificaciones denegado.');
            }
        })
        .then(token => {
            console.log("Token de notificaciones:", token);
        })
        .catch(error => {
            console.error("Error al obtener el token:", error);
        });

    onMessage(messaging, payload => {
        console.log('Mensaje recibido:', payload);
        alert(`Nueva notificación: ${payload.notification.title}`);
    });
</script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/FelizCumpleA/firebase-messaging-sw.js')
            .then(registration => {
                console.log('Service Worker registrado:', registration);
            })
            .catch(error => {
                console.error('Error al registrar el Service Worker:', error);
            });
    }
</script>


<body>
    <script>
        // Estado de las cartas
        const cartasHabilitadas = {
      'fotos/carta1.jpeg': true,
      'fotos/carta2.jpeg': true,
      'fotos/carta3.jpeg': true,
      'fotos/carta4.jpeg': true,
      'fotos/carta5.jpg': true,
      'fotos/carta6.jpg': false,
        };
    
        // Obtener el parámetro 'image' de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const image = urlParams.get('image');  // Obtiene el valor del parámetro 'image' de la URL

      // Asignar los mensajes estáticos para cada carta
      const messages = {
        'fotos/carta1.jpeg': 'La primera vez que te vi, sentí el suelo desmoronarse bajo mis pies, cuando me di cuenta Era más de vos que de mí mismo. Esa noche me perdí en vos. En tus ojos, tu risa, en en tus labios. En una sola noche pintaste mi mundo de colores, colores que no sabía que existían, pero que ahora me habitan. Es ridículo, pero esa noche fue suficiente. Me enamoré de cada gesto que hacía temblar el tiempo, de cada mirada que encendía los silencios, y me perdí aún más con cada beso que dibujabas en mí. Desde entonces, no he dejado de caminar por el universo que sos.',
        'fotos/carta2.jpeg': 'Estos meses contigo han sido inimaginables. Jamás pensé que tendría a alguien como vos: fuerte, valiente, y seguir siendo bueno, dulce, tan único. Sos esa parte que siempre busqué, lo que mi alma anhelaba sin saberlo. Cada vez que estoy contigo, el mundo podría arder en llamas y no me importaría, porque con una mirada, una caricia o un beso tuyo, todo mi infierno se apaga. En ese instante, paso del caos al cielo, contigo... de la mano..',
        'fotos/carta3.jpeg': 'Te lo prometo. No te amaré solo por lo que ves, sino por lo que somos, por lo que crecemos juntos, por cada palabra compartida, por cada beso robado a la eternidad, será un amor que se mide en la profundidad de lo que hemos construido, en lo que hemos sido siempre, y en lo que seguiremos siendo..',
        'fotos/carta4.jpeg': 'Con todo en contra, te amaría siempre. Sos indispensable, casi como respirar. No puedo imaginar mis sueños ni mis metas sin vos. Quiero estar a tu lado en cada logro y cada decisión que tomes. Voy a estar contigo siempre, en los buenos momentos, haciendo unboxing de hamburguesas super high, y en los malos, cuando el mundo pese demasiado. No importa qué pase, siempre voy a estar a tu lado..',
        'fotos/carta5.jpg': 'Feliz cumple criatura te amo mucho Pista de regalo Desde que empezamos te empezo a gustar y usar '   ,
    };

        


        // Obtener el mensaje correspondiente a la imagen seleccionada
        const message = messages[image] || 'Mensaje no encontrado';

        // Mostrar la imagen y el mensaje
        document.body.innerHTML = `
            <div class="container">
                <img src="${image}" alt="Imagen de la carta">
                <div class="message">${message}</div>
            </div>
        `;    // Verificar si la carta está habilitada
        if (cartasHabilitadas.hasOwnProperty(image)) {
            if (cartasHabilitadas[image]) {
                // Mostrar la carta y el mensaje si está habilitada
                const message = messages[image] || 'Mensaje no encontrado';
                document.body.innerHTML = `
                    <div class="container">
                        <img src="${image}" alt="Imagen de la carta">
                        <div class="message">${message}</div>
                    </div>
                `;
            } else {
                // Mostrar mensaje de carta bloqueada
                document.body.innerHTML = `
                    <div class="container">
                        <div class="blocked">bloqueada. ¡todavia no criatura!</div>
                    </div>
                `;
            }
        } else {
            // Manejar casos donde la imagen no se encuentra
            document.body.innerHTML = `
                <div class="container">
                    <div class="blocked">La carta no existe. Por favor verifica el enlace.</div>
                </div>
            `;
        }
        
    </script>
</body>
</html>

